# 项目文件清单与用途说明

> 本文档按目录梳理项目中**所有文档与关键文件**，并说明每个文件的用途。  
> 不包含 `node_modules`、`target`、`dist` 等依赖/构建产物目录。

---

## 一、项目根目录

| 文件 | 用途 |
|------|------|
| **README.md** | 项目总说明：技术栈、目录结构、快速开始（数据库/后端/前端启动）、测试账号、功能模块与 API 一览。新人入口文档。 |
| **技术选型.md** | 简要列出后端（Spring Boot、MySQL、Redis、MyBatis-Plus、JWT、Knife4j、Maven、Docker）与前端（Vue3、Element Plus）的技术及选型理由。 |
| **测试用例.md** | 功能测试用例文档：按模块（登录、周报填写、团队周报、用户管理、统计分析等）列出用例 ID、标题、优先级、前置条件、步骤、预期结果。用于手工/自动化测试参考。 |
| **测试用例.xlsx** | 测试用例的 Excel 版本，便于在团队内编辑、评审和跟踪。 |
| **静态页面.md** | 静态原型需求说明：要求用 Bootstrap 5 做单页高保真原型，包含登录、主布局、工作台、写周报、团队周报、统计分析、系统管理等模块的界面与交互描述。 |
| **prototype.html** | 根据「静态页面.md」需求产出的单文件静态演示原型（Bootstrap 5 + 简单路由），用于演示界面与交互，无后端。 |

---

## 二、.vscode（编辑器配置）

| 文件 | 用途 |
|------|------|
| **settings.json** | VS Code/Cursor 工作区配置：Java 编译空值分析模式、文件编码 UTF-8、自动猜测编码。保证本仓库内编辑与编译行为一致。 |

---

## 三、docs/（项目文档目录）

| 文件 | 用途 |
|------|------|
| **项目结构分析.md** | 项目整体与前后端结构说明：技术栈表、后端包结构与职责、Controller 与接口列表、前端目录与职责、页面与路由、前后端对应关系、数据流与权限、部署依赖。适合快速了解架构。 |
| **前后端代码作用-2小时入门教程.md** | 面向「理解前后端各做什么」的 2～3 小时教程：总览表、前端/后端职责与登录流程、一条完整请求链路（登录）的跟读步骤、汇报用总结、建议学习顺序与时间分配。适合完成 mentor 布置的前后端理解任务。 |
| **从零搭建迷你登录系统-手把手教程.md** | 手把手教程：从空目录开始用 Node + Express + 单页 HTML 搭一个「只有登录 + 登录后一段文字」的极简系统。含逐步操作与代码说明，便于亲手敲一遍理解前后端配合。 |
| **小白入门-从零跑通.md** | 面向零基础：项目是做什么的、前后端分离概念、目录结构、前端/后端代码组织、请求如何从前端到后端、环境准备与启动步骤、常见问题。帮助新人把项目跑起来并建立整体印象。 |
| **数据库表关系.md** | 数据库设计说明：库名、字符集、四张表（sys_department、sys_role、sys_user、weekly_report）的字段、类型、索引与表间关系（含 ER 说明）。开发与排查问题时查表结构用。 |
| **Redis缓存说明.md** | Redis 在本项目中的用法：依赖与配置、缓存项与 TTL（部门树、角色、用户信息、提交率等）、对应代码位置（RedisCacheConfig、各 Service 的 @Cacheable/@CacheEvict）、运行要求与关闭方式。 |
| **项目文件清单与用途说明.md** | 本文件。列出项目中各文档与关键文件的路径及用途，便于检索与交接。 |

---

## 四、mini-login-demo/（极简登录演示项目）

| 文件 | 用途 |
|------|------|
| **README.md** | 迷你登录项目的说明：如何运行（npm install、node server.js）、测试账号、以及「从零自己搭」时对应教程文档的路径。 |
| **package.json** | Node 项目配置：项目名、版本、描述、入口 server.js、依赖 express。 |
| **server.js** | 后端入口：Express 服务端口 3000、解析 JSON、静态托管 public、内存用户表、POST /api/login 校验并返回 JSON、GET / 返回 index.html。 |
| **public/index.html** | 前端单页：登录表单（用户名/密码）、欢迎区块（登录后显示一段文字）、退出按钮；用 fetch 调 /api/login，用 localStorage 存登录态。 |

---

## 五、weekly-report-backend/（周报系统后端）

### 5.1 根目录

| 文件 | 用途 |
|------|------|
| **pom.xml** | Maven 项目配置：项目坐标、依赖（Spring Boot、MyBatis-Plus、MySQL、Redis、JWT、Knife4j、Lombok 等）、构建插件。 |
| **package.json** / **package-lock.json** | 若存在则多为本地脚本或工具用，非主构建入口；主构建以 Maven 为准。 |
| **maven-debug.log** | Maven 调试日志，排查构建问题时生成。 |

### 5.2 src/main/resources

| 文件 | 用途 |
|------|------|
| **application.yml** | Spring Boot 应用配置：服务端口 8080、数据库连接（MySQL weekly_report）、Redis 连接、MyBatis-Plus、JWT 密钥与过期时间、Knife4j、日志级别等。 |
| **db/schema.sql** | 数据库初始化脚本：建库、建表（sys_department、sys_role、sys_user、weekly_report）、初始数据（部门、角色、用户等）。部署或本地首次跑库时执行。 |
| **mapper/UserMapper.xml** | MyBatis XML：用户分页查询 SQL（联表部门、角色，支持关键字、部门列表、角色筛选）。对应 UserMapper 接口中的 selectUserPage。 |
| **mapper/WeeklyReportMapper.xml** | MyBatis XML：团队周报查询 SQL（联表用户、部门，支持年周、部门列表、日期范围、状态、关键字）。对应 WeeklyReportMapper 的 selectTeamReports。 |

### 5.3 src/main/java/com/company/weeklyreport/

| 文件 | 用途 |
|------|------|
| **WeeklyReportApplication.java** | Spring Boot 启动类：@SpringBootApplication、@MapperScan，main 方法启动应用。 |
| **common/Result.java** | 统一响应封装：code、message、data；提供 success()、error() 静态方法，所有 Controller 返回 Result\<T\>。 |
| **config/WebConfig.java** | Web 配置：UTF-8 编码过滤器、CORS、注册 JwtAuthInterceptor，并配置拦截路径与白名单（登录、文档等）。 |
| **config/JwtAuthInterceptor.java** | JWT 拦截器：在请求进入 Controller 前解析 token（当前为调试放行），理想情况将 userId 放入 request 供 /auth/info 等使用。 |
| **config/MyBatisPlusConfig.java** | MyBatis-Plus 配置：分页插件、自动填充 createTime/updateTime。 |
| **config/RedisCacheConfig.java** | Redis 缓存配置：@EnableCaching、缓存名常量、各缓存 TTL、CacheManager Bean（key/value 序列化）。 |
| **util/JwtUtils.java** | JWT 工具：读取配置的 secret/expiration，提供 generateToken、parseToken、getUserId、validateToken。 |
| **entity/User.java** | 用户实体，对应 sys_user 表；含非表字段 departmentName、roleName。 |
| **entity/Department.java** | 部门实体，对应 sys_department 表；含 children 用于树形结构。 |
| **entity/Role.java** | 角色实体，对应 sys_role 表；含 permissions JSON、非表字段 userCount。 |
| **entity/WeeklyReport.java** | 周报实体，对应 weekly_report 表；含非表字段 username、departmentName。 |
| **mapper/UserMapper.java** | 用户 Mapper 接口：继承 BaseMapper，定义 selectByEmail、selectUserWithInfo、selectUserPage。 |
| **mapper/RoleMapper.java** | 角色 Mapper：继承 BaseMapper，定义 selectRoleWithCount。 |
| **mapper/DepartmentMapper.java** | 部门 Mapper：继承 BaseMapper，主要用通用 CRUD。 |
| **mapper/WeeklyReportMapper.java** | 周报 Mapper：继承 BaseMapper，定义 selectByUserId、selectTeamReports、getSubmitStats。 |
| **service/UserService.java** | 用户业务：登录（邮箱+密码校验、MD5）、getUserWithInfo（带缓存）、用户分页（含子部门）、保存用户、邮箱唯一校验。 |
| **service/DepartmentService.java** | 部门业务：构建部门树、缓存、evict 缓存。 |
| **service/RoleService.java** | 角色业务：列表、带用户数的详情、缓存、角色编码唯一校验。 |
| **service/WeeklyReportService.java** | 周报业务：我的周报、当前/上周周报、草稿/提交、团队周报分页、评分评价、提交率统计及缓存失效。 |
| **controller/AuthController.java** | 认证接口：POST /auth/login、GET /auth/info、POST /auth/logout。 |
| **controller/UserController.java** | 用户接口：分页、详情、新增、更新、删除。 |
| **controller/DepartmentController.java** | 部门接口：部门树、新增、删除。 |
| **controller/RoleController.java** | 角色接口：列表、详情、新增、更新权限、删除。 |
| **controller/WeeklyReportController.java** | 周报接口：当前周、我的列表、当前周报、导入上周、草稿、提交、团队列表、详情、评分。 |
| **controller/StatisticsController.java** | 统计接口：提交率、评分趋势（当前为模拟数据）。 |

---

## 六、weekly-report-frontend/（周报系统前端）

### 6.1 根目录

| 文件 | 用途 |
|------|------|
| **package.json** | 前端项目配置：名称、依赖（Vue、Element Plus、Vue Router、Pinia、Axios、ECharts、wangeditor 等）、脚本 dev/build/preview。 |
| **vite.config.js** | Vite 配置：Vue 插件、路径别名 @、开发服务器端口 5173、/api 代理到后端 8080 并去掉 /api 前缀。 |
| **index.html** | 前端入口 HTML：挂载 Vue 应用（#app），引入 main.js。 |

### 6.2 src/

| 文件 | 用途 |
|------|------|
| **main.js** | 前端入口：创建 Vue 应用、注册 Pinia/Router/Element Plus/全局图标、引入全局样式、挂载 #app。 |
| **App.vue** | 根组件：仅包含 \<router-view\>，按路由渲染当前页面。 |
| **router/index.js** | 路由表与守卫：/login、/ 下各子路由（dashboard、write-report、team-report 等）、beforeEach 设置标题与登录校验（未登录跳 /login）。 |
| **stores/user.js** | Pinia 用户状态：token、userInfo、isLoggedIn；login、fetchUserInfo、logout、clearToken；与 localStorage 同步。 |
| **api/index.js** | Axios 实例与接口封装：baseURL /api、请求头带 token、响应统一处理 401 与错误提示；导出所有后端 API 的调用函数。 |
| **utils/date.js** | 日期工具：formatDateTime、formatDate、formatRelativeTime，供各页面显示时间。 |
| **styles/index.scss** | 全局样式：重置、body、滚动条、.card、.page-header、.search-bar。 |
| **views/Login.vue** | 登录页：左右布局、邮箱密码表单、校验、调用 userStore.login、成功后跳工作台。 |
| **views/Layout.vue** | 主布局：左侧菜单、顶栏（标题、周次、消息、用户下拉）、主内容区 \<router-view\>。 |
| **views/Dashboard.vue** | 工作台：统计卡片、我的历史周报表格、待办、周报详情弹窗。 |
| **views/WriteReport.vue** | 写周报：周次选择、富文本（本周工作/下周计划/需协调）、导入上周计划、暂存、提交。 |
| **views/TeamReport.vue** | 团队周报：部门树、筛选条件、团队周报表格、分页、详情与评分弹窗。 |
| **views/Analytics.vue** | 统计分析：提交率饼图、评分趋势折线图（ECharts）。 |
| **views/UserManagement.vue** | 用户管理：搜索与筛选、用户表格、分页、新增/编辑/删除弹窗。 |
| **views/RoleManagement.vue** | 角色管理：角色表格、新增/编辑角色、权限配置弹窗。 |
| **views/Messages.vue** | 消息中心：Tab（全部/未读/评分/评价/系统）、消息列表（当前为前端模拟数据）。 |
| **views/Profile.vue** | 个人中心：基本信息、修改密码、我的周报、通知设置。 |

---

## 七、汇总统计

| 分类 | 数量 | 说明 |
|------|------|------|
| 根目录文档/资源 | 6 | README、技术选型、测试用例、静态页面说明、原型 HTML |
| .vscode | 1 | 工作区设置 |
| docs | 7 | 结构分析、教程、入门、数据库、Redis、文件清单 |
| mini-login-demo | 4 | 演示用极简登录项目 |
| weekly-report-backend 源码与配置 | 约 30 | 不含 target；含 pom、yml、sql、xml、Java 类 |
| weekly-report-frontend 源码与配置 | 约 22 | 不含 node_modules/dist；含 package、vite、html、src 下所有文件 |

如需「每个 Java/Vue 文件逐行作用」的细节，可结合 **项目结构分析.md** 与 **前后端代码作用-2小时入门教程.md** 对照阅读。
