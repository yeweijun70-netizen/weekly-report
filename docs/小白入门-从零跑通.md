# 小白入门：从零理解并跑通企业周报系统

本文档面向零基础同学，讲解：**前后端代码长什么样**、**请求是怎么从前端到后端的**、**如何一步步把项目跑起来**。

---

## 一、先建立整体印象

### 1.1 这个项目是干什么的？

一个 **企业周报管理系统**：员工可以写周报、提交，组长可以看团队周报、打分，管理员可以管用户和角色，还有统计图表等。

### 1.2 什么是「前后端分离」？

- **前端**：你平时在浏览器里看到的页面（登录框、表格、按钮等），由 **Vue 3** 写出来，运行在「前端开发服务器」上（例如 `http://localhost:5173`）。
- **后端**：真正查数据库、算数据、存周报的逻辑在 **Spring Boot** 里，运行在另一个进程（例如 `http://localhost:8080`）。
- **分离**：前端和后端是**两个独立工程**，通过 **HTTP 接口（API）** 通信：前端发请求，后端返回 JSON 数据。

可以简单记：

- **前端** = 页面 + 发请求
- **后端** = 接请求 + 查库/算数 + 返回数据

---

## 二、项目在电脑上长什么样（目录结构）

```
weekly-report/                    # 项目根目录
├── weekly-report-backend/        # 后端工程（Java + Spring Boot）
├── weekly-report-frontend/       # 前端工程（Vue 3 + Vite）
├── docs/                         # 文档（你现在看的就在这里）
├── README.md                     # 项目说明
└── ...
```

- 要跑通项目，你需要分别进入 **backend** 和 **frontend** 两个文件夹，各自安装依赖、各自启动。
- 前端负责「界面和交互」，后端负责「数据和业务」。

---

## 三、前端代码是怎么组织的（小白视角）

### 3.1 入口：从哪开始执行？

- **index.html**：浏览器最先加载的页面，里面会加载 `src/main.js`。
- **src/main.js**：创建 Vue 应用，挂载路由（Vue Router）、状态（Pinia）、UI 库（Element Plus），可以理解为「前端的 main 函数」。
- **src/App.vue**：根组件，里面就是一个 `<router-view />`，根据当前网址显示不同页面。

所以流程是：**index.html → main.js → App.vue → 根据路由显示某个页面**。

### 3.2 路由：网址和页面的对应关系

路由在 **src/router/index.js** 里配置：

- `/login` → 登录页（Login.vue）
- `/` 下面有布局 Layout，再挂子路由：
  - `/dashboard` → 工作台
  - `/write-report` → 写周报
  - `/team-report` → 团队周报
  - `/analytics` → 统计分析
  - `/user-management` → 用户管理
  - `/role-management` → 角色管理
  - `/messages` → 消息中心
  - `/profile` → 个人中心

未登录访问这些页面会被重定向到 `/login`。

### 3.3 页面和请求：数据从哪来？

- **页面**：都在 **src/views/** 下，一个 .vue 文件就是一个页面（如 `Login.vue`、`TeamReport.vue`）。
- **发请求**：前端用 **Axios** 发 HTTP 请求，所有接口封装在 **src/api/index.js** 里（如 `login`、`getUserPage`、`getReportTeam` 等）。
- **请求地址**：前端统一写 `baseURL: '/api'`。开发时 Vite 会把 `/api` 代理到后端的 `http://localhost:8080`，并把路径里的 `/api` 去掉，所以前端访问 `/api/auth/login` 实际会请求到后端的 `http://localhost:8080/auth/login`。

小结：**看页面去 views，看调了哪些接口去 api/index.js，看界面跳转去 router/index.js**。

---

## 四、后端代码是怎么组织的（小白视角）

### 4.1 入口：从哪启动？

- **WeeklyReportApplication.java**：Spring Boot 的启动类，运行它就会启动整个后端服务（默认端口 8080）。

### 4.2 请求怎么被处理？一条链路

1. **Controller（控制器）**：在 **controller** 包下，每个类对应一类接口。例如：
   - `AuthController`：`/auth/login`、`/auth/info`、`/auth/logout`
   - `UserController`：`/user/page`、`/user/:id` 等
   - `WeeklyReportController`：`/report/current-week`、`/report/submit`、`/report/team` 等
2. **Service（业务逻辑）**：Controller 里会调用 **service** 包下的类，做「查库、算数、校验」等。
3. **Mapper / 数据库**：Service 再通过 **mapper** 包（MyBatis-Plus）访问数据库，**entity** 包里的类和数据库表一一对应。

所以一条请求的路径是：  
**浏览器 → 前端 Axios → 后端 Controller → Service → Mapper → 数据库 → 原路返回 JSON**。

### 4.3 配置在哪？

- **application.yml**：端口、数据库连接、Redis、JWT、MyBatis 等都在这里。你要改的主要是：
  - 数据库：`url`、`username`、`password`
  - Redis：若本机没 Redis，可先注释掉 Redis 相关配置或改成你本机的地址
- **db/schema.sql**：建库、建表、初始数据（如测试账号），第一次跑项目前需要在 MySQL 里执行这个脚本。

---

## 五、如何一步步构建并跑通项目

### 5.1 准备环境

| 需要安装 | 用途 |
|----------|------|
| **JDK 8+** | 运行后端 Java 程序 |
| **Maven 3.8+** | 构建后端、拉取依赖 |
| **Node.js 14+**（自带 npm） | 构建前端、跑前端开发服务器 |
| **MySQL 8.0+** | 存用户、周报、部门等数据 |
| **Redis**（可选） | 缓存，若暂时没有可先不配或关掉 |

### 5.2 第一步：初始化数据库

1. 打开 MySQL（命令行或 Navicat 等工具）。
2. 执行项目里的建表脚本（会创建数据库 `weekly_report` 和所有表、初始数据）：
   ```bash
   mysql -u root -p < weekly-report-backend/src/main/resources/db/schema.sql
   ```
   或在图形化工具里打开 `schema.sql` 执行。

### 5.3 第二步：改后端配置并启动

1. 进入后端目录：
   ```bash
   cd weekly-report-backend
   ```
2. 用记事本或 IDE 打开 **src/main/resources/application.yml**：
   - 把 `spring.datasource.url`、`username`、`password` 改成你自己的 MySQL 地址和账号密码。
   - 如果本机没有 Redis，可暂时注释掉 `spring.redis` 整段，或改成你本机 Redis 的 host/port。
3. 启动后端：
   ```bash
   mvn spring-boot:run
   ```
4. 看到控制台出现类似「Started WeeklyReportApplication」即表示后端启动成功。  
   可在浏览器打开 **http://localhost:8080/doc.html** 查看接口文档（Knife4j）。

### 5.4 第三步：安装前端依赖并启动前端

1. 新开一个终端，进入前端目录：
   ```bash
   cd weekly-report-frontend
   ```
2. 安装依赖（首次必须执行）：
   ```bash
   npm install
   ```
3. 启动前端开发服务器：
   ```bash
   npm run dev
   ```
4. 终端里会提示访问地址，一般是 **http://localhost:5173**（或 5174 等），用浏览器打开即可。

### 5.5 第四步：验证跑通

- 打开前端页面，应能看到登录界面。
- 用 README 里的测试账号登录，例如：
  - 管理员：admin@company.com / 123456
  - 组长：lisi@company.com / 123456
  - 员工：zhangsan@company.com / 123456
- 登录后能进入工作台、写周报、团队周报等，即表示前后端都跑通了。

---

## 六、一次完整请求是怎么走的（加深理解）

以「用户点击登录」为例：

1. 用户在登录页输入邮箱、密码，点击「登录」。
2. **前端**（Login.vue）调用 `api.login(email, password)`，即 Axios 发 `POST /api/auth/login`，请求体里带邮箱和密码。
3. **Vite 代理**把 `/api` 转到 `http://localhost:8080`，路径变成 `POST http://localhost:8080/auth/login`。
4. **后端** `AuthController` 的 `login` 方法接到请求，调用 `UserService` 校验账号密码；若正确，用 JwtUtils 生成 token，把 token 和用户信息放进统一响应 Result 里返回。
5. **前端**收到 JSON，把 token 存到 Pinia 和 localStorage，然后跳转到工作台（如 `/dashboard`）。
6. 之后每次请求，前端都会在请求头里带 `Authorization: Bearer <token>`，后端通过 JwtAuthInterceptor 解析 token 识别当前用户（若已配置校验）。

其他功能（如「团队周报列表」「提交周报」）也是同样套路：**页面调 api → 发请求到后端 → Controller → Service → Mapper → 数据库 → 返回 JSON → 前端渲染**。

---

## 七、你要改/要看的文件小结（方便你给 Mentor 汇报）

| 目的 | 看/改哪里 |
|------|-----------|
| 改数据库连接、端口、Redis | 后端 `application.yml` |
| 建表、初始数据 | 后端 `db/schema.sql` |
| 前端代理地址、端口 | 前端 `vite.config.js`（proxy、port） |
| 页面和菜单对应关系 | 前端 `router/index.js`、Layout 里的菜单 |
| 调了哪些后端接口 | 前端 `api/index.js` |
| 后端接口路径和参数 | 后端 `controller` 包、或访问 http://localhost:8080/doc.html |
| 业务逻辑 | 后端 `service` 包 |
| 数据库表对应关系 | 后端 `entity` 包 + `docs/数据库表关系.md` |

---

## 八、常见问题（小白向）

- **前端白屏**：看浏览器控制台（F12）是否有报错；确认 `npm run dev` 已成功、端口没被占用。
- **接口 404 或连不上**：确认后端已用 `mvn spring-boot:run` 启动，且端口是 8080；确认前端 vite 的 proxy 指向 `http://localhost:8080`。
- **登录失败 / 数据库错误**：检查 application.yml 里数据库账号密码、数据库名是否和 schema.sql 一致，并确认已执行 schema.sql。
- **Redis 报错**：若暂时不用缓存，可在 application.yml 里注释掉 Redis 配置；或本机装 Redis 并改成 `host: localhost`、`port: 6379` 等。

---

按上面顺序：**装环境 → 执行 schema.sql → 改 application.yml → 启动后端 → 安装前端依赖并启动前端 → 浏览器登录**，就能把项目完整跑通。若某一步报错，把报错信息发给 Mentor 或贴到文档里，会更容易排查。
