const fs = require('fs');
const path = require('path');

const regexReplacements = [
  [/鍚[^\u4e00-\u9fa5]*敤/g, '启用'],
  [/绂佺敤/g, '禁用'],
  [/鏂板[^>]*寮圭獥/g, '新增/编辑弹窗'],
  [/鏂板[^'\u4e00-\u9fa5]*瑙掕壊/g, '新增角色'],
  [/濉[^\u4e00-\u9fa5]*啓鍛ㄦ姤/g, '撰写周报'],
  [/鍌[^\u4e00-\u9fa5]*氦鎻愰啋/g, '催交提醒'],
  [/缁熻[^\u4e00-\u9fa5]*鍒嗘瀽/g, '统计分析'],
  [/鏌ョ湅缁熻[^\u4e00-\u9fa5]*鎶ヨ〃/g, '查看统计报表'],
];

const replacements = [
  ['琛ㄦ牸', '表格'],
  ['瑙掕壊寮圭獥', '角色弹窗'],
  ['缂栬緫瑙掕壊', '编辑角色'],
  ['鏂板瑙掕壊', '新增角色'],
  ['鏉冮檺寮圭獥', '权限弹窗'],
  ['鏉冮檺閰嶇疆', '权限配置'],
  ['鍛ㄦ姤绠＄悊', '周报管理'],
  ['鏌ョ湅鍛ㄦ姤', '查看周报'],
  ['濉啓鍛ㄦ姤', '撰写周报'],
  ['鎻愪氦鍛ㄦ姤', '提交周报'],
  ['鍥㈤槦绠＄悊', '团队管理'],
  ['鏌ョ湅鍥㈤槦鍛ㄦ姤', '查看团队周报'],
  ['璇勫垎璇勪环', '评分评价'],
  ['鍌氦鎻愰啋', '催交提醒'],
  ['缁熻鍒嗘瀽', '统计分析'],
  ['鏌ョ湅缁熻鎶ヨ〃', '查看统计报表'],
  ['瀵煎嚭鎶ヨ〃', '导出报表'],
  ['绯荤粺绠＄悊', '系统管理'],
  ['鐢ㄦ埛绠＄悊', '用户管理'],
  ['瑙掕壊绠＄悊', '角色管理'],
  ['閮ㄩ棬绠＄悊', '部门管理'],
  ['鍙栨秷', '取消'],
  ['瑙ｆ瀽宸叉湁鏉冮檺', '解析已有权限'],
  ['椤堕儴瀵艰埅', '顶部导航'],
  ['妯℃嫙娑堟伅鏁版嵁', '模拟消息数据'],
  ['璺宠浆鍒板搴旈〉闈', '跳转到对应页面'],
  ['娑堟伅閫氱煡闈㈡澘鏍峰紡', '消息通知面板样式'],
  ['鍙充晶鍐呭鍖', '右侧内容区'],
  ['淇敼瀵嗙爜', '修改密码'],
  ['褰撳墠瀵嗙爜', '当前密码'],
  ['纭瀵嗙爜', '确认密码'],
  ['鎺ユ敹绯荤粺缁存姢銆佹洿鏂扮瓑鍏憡', '接收系统维护、更新等公告'],
  ['缁熻鏁版嵁', '统计数据'],
  ['涓汉琛ㄥ崟', '个人表单'],
  ['瀵嗙爜琛ㄥ崟', '密码表单'],
  ['璇疯緭鍏ユ柊瀵嗙爜', '请输入新密码'],
  ['鎴戠殑鍛ㄦ姤', '我的周报'],
  ['閫氱煡璁剧疆', '通知设置'],
  ['涓婁紶澶村儚', '上传头像'],
  ['璋冪敤API淇敼瀵嗙爜', '调用API修改密码'],
  ['缂栬緫鍣ㄩ厤缃', '编辑器配置'],
  ['缂栬緫鍣ㄥ垱寤哄洖璋', '编辑器创建回调'],
  ['鍒囨崲鍛ㄦ', '切换周次'],
  ['鍏ㄥ眬鏍峰紡锛屼笉浣跨敤scoped锛岀淇漌angEditor鏍峰紡鐢熸晥', '全局样式，不使用scoped，确保wangEditor样式生效'],
  ['宸︿晶涓汉淇℃伅鍗＄墖', '左侧个人信息卡片'],
  ['鍛ㄦ姤鍒楄〃', '周报列表'],
  ['鍒嗛〉', '分页'],
];

const dir = path.join(__dirname, 'src', 'views');
const files = ['UserManagement.vue', 'RoleManagement.vue', 'Layout.vue', 'Profile.vue', 'WriteReport.vue', 'TeamReport.vue', 'Messages.vue'];
files.forEach(f => {
  const filePath = path.join(dir, f);
  if (!fs.existsSync(filePath)) return;
  let s = fs.readFileSync(filePath, 'utf8');
  regexReplacements.forEach(([from, to]) => { s = s.replace(from, to); });
  replacements.forEach(([from, to]) => {
    while (s.includes(from)) s = s.replace(from, to);
  });
  fs.writeFileSync(filePath, s);
  console.log('Fixed:', f);
});
